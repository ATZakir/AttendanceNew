@using Attendance.Web.Helpers
@{
    ViewBag.Title = @Resources.ResourceEmployee.LblTitle;
    Layout = "~/Views/Shared/_AdminViewLayout.cshtml";
}

<div ng-controller="employeeCtrl">

@* ************ FORM - SECTION (Start)*************** *@
<div class="panel panel-default">
    <div class="panel-heading text-lg text-bold text-uppercase">
        @Resources.ResourceEmployee.LblTitle
    </div>
    <div class="panel-body border-green pt pb">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-2 col-sm-4 col-xs-4 left-selection-column">
	                <div class="selector-container-div shadow">
		                <div class="panel panel-default selector-container">
                            <div class="panel-body" style="padding: 0;">
                                <div class="form-group">
                                    <div class=" padding-right-zero">
                                        <label class=" control-label default-color">
                                            Division
                                        </label>
                                    </div>
                                    <div class="">
                                        <select data-ng-model="DivisionId" class="form-control"
                                                data-ng-options="c.Id as c.Name for c in divisionList |
                                    orderBy: 'Name'" name="DivisionId" ng-change="GetAllDistrictFilter(DivisionId)">
                                            <option value="">@Resources.ResourceUpazila.LblSelectDivision</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class=" padding-right-zero">
                                        <label class=" control-label default-color">
                                            District
                                        </label>
                                    </div>
                                    <div class="">
                                        <select data-ng-model="DistrictId" class="form-control"
                                                data-ng-options="c.Id as c.Name for c in districtList |
                                    orderBy: 'Name'" name="DistrictId" ng-change="GetAllThanaFilter(DistrictId)">
                                            <option value="">@Resources.ResourceUpazila.LblSelectDistrict</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class=" padding-right-zero">
                                        <label class=" control-label default-color">
                                            Thana
                                        </label>
                                    </div>
                                    <div class="">
                                        <select data-ng-model="UpazilaId" class="form-control"
                                                data-ng-options="c.Id as c.Name for c in thanaList | orderBy: 'Name'" name="UpazilaId">
                                            <option value="">@Resources.ResourceCommon.LblUpazilaName</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class=" padding-right-zero">
                                        <label class=" control-label default-color">
                                            <b class="starStyle"></b> @Resources.ResourceEmployee.LblName
                                        </label>
                                    </div>
                                    <div class="">
                                        <input type="text" ng-model="SearchText" placeholder='@Resources.ResourceCommon.TextBoxSearch_Watermark' class="form-control" />
                                    </div>
                                    <br />
                                    <button type="submit" ng-click="loadAllEmployee(DivisionId, DistrictId, UpazilaId)" class="btn btn-success btn-sm btn-refresh-icon">
                                        Refresh
                                    </button>
                                </div>

                                <div class="form-group">
                                    <label class="control-label">@Resources.ResourceEmployee.LblAllEmployeeList</label>
                                    <div class="" style="height: 200px; overflow: auto;">
                                        <select multiple data-ng-model="Edata" class="form-control listSelect" focus-on="focusMe"
                                                required data-ng-options="c as c.Code + '-'+ c.FullName for c in allEmployeeFromDb| orderBy : predicate :reverse | orderBy: 'Code'" name="EmployeeId"
                                                style="height: 100%; overflow-y: auto; padding: 0;"
                                                ng-click="populateEmployee(Edata);"></select>
                                    </div>
                                </div>
                            </div>
			                <div class="panel-footer">
				                <ul uib-pagination boundary-links="false" total-items="pagingInfo.totalItems"
				                    items-per-page="pagingInfo.itemsPerPage" ng-change="selectPage(pagingInfo.page)"
				                    ng-model="pagingInfo.page" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;"></ul>
			                </div>
		                </div>
	                </div>
                </div>

                <div class="col-md-10 col-sm-8 col-xs-8">
                    <div class="form-horizontal">
                        <form name="form" novalidate>
                            <div class="row">
                                <div class="col-xs-6 col-sm-6 col-md-6">

                                    <div class="form-group" show-errors id="searchdivid">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                <b class="starStyle">*</b> @Resources.ResourceEmployee.LblCode
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="text" ng-maxlength="50" ng-model="Code" required name="Code" focus-on="focusMe" />
                                            <b class="help-block" ng-if="form.Code.$error.required">
                                                @string.Format(Resources.ResourceCommon.VMsgRequired_Name, Resources.ResourceEmployee.LblCode)
                                            </b>
                                            <b class="help-block" ng-if="form.Code.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblGender
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <select data-ng-model="Gender" class="form-control"
                                                    data-ng-options="c.name as c.name for c in Genders | orderBy: 'name'" name="Gender">
                                                <option value="">@Resources.ResourceEmployee.SelectGender</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group" show-errors>
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                <b class="starStyle">*</b> @Resources.ResourceEmployee.LblFullName
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="text" ng-maxlength="100" ng-model="FullName" required name="FullName" />
                                            <b class="help-block" ng-if="form.FullName.$error.required">
                                                @string.Format(Resources.ResourceCommon.VMsgRequired_Name, Resources.ResourceEmployee.LblFullName)
                                            </b>
                                            <b class="help-block" ng-if="form.FullName.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                    <div class="form-group" show-errors>
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblFullNameBangla
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="text" ng-maxlength="100" ng-model="FullNameBangla" name="FullNameBangla" />
                                            <b class="help-block" ng-if="form.FullNameBangla.$error.required">
                                                @string.Format(Resources.ResourceCommon.VMsgRequired_Name, Resources.ResourceEmployee.LblFullNameBangla)
                                            </b>
                                            <b class="help-block" ng-if="form.FullName.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                    <div class="form-group" show-errors>
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                <b class="starStyle">*</b> @Resources.ResourceEmployee.LblPresentAddress
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <textarea class="form-control" ng-maxlength="200" ng-model="PresentAddress" required name="PresentAddress"></textarea>
                                            <b class="help-block" ng-if="form.PresentAddress.$error.required">
                                                @string.Format(Resources.ResourceCommon.VMsgRequired_Name, Resources.ResourceEmployee.LblPresentAddress)
                                            </b>
                                            <b class="help-block" ng-if="form.PresentAddress.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblFatherName
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="text" ng-maxlength="100" ng-model="FatherName" name="FatherName" />
                                            <b class="help-block" ng-if="form.FatherName.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblMotherName
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="text" ng-maxlength="100" ng-model="MotherName" name="MotherName" />
                                            <b class="help-block" ng-if="form.MotherName.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblDOB
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input type="text" class="form-control" ng-model="DOB" name="DOB" data-date-format="dd-MMM-yyyy" bs-datepicker data-container='body'
                                                   data-min-view="0" data-autoclose="true">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblNationality
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="text" ng-maxlength="50" ng-model="Nationality" name="Nationality" />

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblNationalId
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="text" ng-maxlength="50" ng-model="NationalId" name="NationalId" />
                                            <b class="help-block" ng-if="form.NationalId.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                    <div class="form-group">

                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblPassport
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="text" ng-maxlength="50" ng-model="PassportNo" name="PassportNo" />
                                            <b class="help-block" ng-if="form.PassportNo.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblJoiningDate
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input type="text" class="form-control" ng-model="JoinDate" name="JoinDate" data-date-format="dd-MMM-yyyy" bs-datepicker data-container='body'
                                                   data-min-view="0" data-autoclose="true">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblEmail
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="email" ng-maxlength="100" ng-model="Email" name="Email" />
                                            <b class="help-block" ng-if="form.Email.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblOfficePhone
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="number" ng-maxlength="50" ng-model="OfficePhone" name="OfficePhone" />
                                            <b class="help-block" ng-if="form.OfficePhone.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblOfficeMobile
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="number" ng-maxlength="50" ng-model="OfficeMobile" name="OfficeMobile" />
                                            <b class="help-block" ng-if="form.OfficeMobile.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                </div>

                                <div class="col-xs-6 col-sm-6 col-md-6">


                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblPermanentAddress
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <textarea class="form-control" ng-maxlength="200" ng-model="PermanentAddress" name="PermanentAddress"></textarea>
                                            <b class="help-block" ng-if="form.PermanentAddress.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblResidentPhone
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="number" ng-maxlength="50" ng-model="ResidentPhone" name="ResidentPhone" />
                                            <b class="help-block" ng-if="form.ResidentPhone.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblResidentMobile
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="number" ng-maxlength="50" ng-model="ResidentMobile" name="ResidentMobile" />
                                            <b class="help-block" ng-if="form.ResidentMobile.$error.maxlength">@Resources.ResourceCommon.VMsgToo_Large</b>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblRelgion
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <input class="form-control" type="text" ng-maxlength="100" ng-model="Relgion" name="Relgion" />

                                        </div>
                                    </div>



                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblMaritalStatus
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <select data-ng-model="MaritalStatus" class="form-control"
                                                    data-ng-options="c.name as c.name for c in aMaritalStatus | orderBy: 'name'" name="MaritalStatus">
                                                <option value="">@Resources.ResourceEmployee.SelectMaritalStatus</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                @Resources.ResourceEmployee.LblBloodGroup
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">
                                            <select data-ng-model="BloodGroup" class="form-control"
                                                    data-ng-options="c.name as c.name for c in bloodGroups | orderBy: 'name'" name="BloodGroup">
                                                <option value="">@Resources.ResourceEmployee.SelectBloodGroup</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class=" padding-right-zero">
                                            <label class="col-xs-12 col-sm-3 col-md-3 control-label default-color">
                                                <b class="starStyle"></b> @Resources.ResourceEmployee.EmployeeImage
                                            </label>
                                        </div>
                                        <div class="col-xs-12 col-sm-9 col-md-9">

                                            @*<input type="file" file-model="myFile" class="form-control" onchange="angular.element(this).scope().uploadImage(this.files)" name="file" data-autoclose="true">*@
                                            <input type="file" name="photo_file" id="imgInp" ng-model="photo_file" data-autoclose="true">
                                            <div style="margin-top: 5px">
                                                <img id="imgshowField" ng-src="/Files/Employee/{{Picture}}" class="img-thumbnail" alt="Employee Image" width="auto" height="100" style="height: 60px; width: auto" />
                                            </div>
                                        </div>
                                    </div>

                                    @* ************ Employee Leave Balance Start *************** *@
                                    <table class="table table-bordered" style="font-size: 13px;">
                                        <thead>
                                            <tr>
                                                <th>Leave Type</th>
                                                <th>Allocated Days</th>
                                                <th>Achieved</th>
                                                <th>Balance</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="leaveBalance in EmployeeLeaveBalanceList">
                                                <td style="width: 100px; text-align: right;">
                                                    {{leaveBalance.LeaveTypeName}} :
                                                </td>
                                                <td style="width: 50px;">
                                                    <input type="text" class="form-control"
                                                           ng-model="leaveBalance.DafaultAllocatedDays" ng-disabled="true">
                                                </td>
                                                <td style="width: 50px;">
                                                    <input type="number" class="form-control" ng-model="leaveBalance.Achieved"
                                                           ng-change="calculateLeaveBalance()">
                                                </td>
                                                <td style="width: 50px;">
                                                    <input type="number" class="form-control" ng-model="leaveBalance.Balance" ng-disabled="true">
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            @* ************ Employee Admin Start *************** *@
            <div class="row">
                <h3 class="heading">@Resources.ResourceAdminEmploymentHistory.LblAdminEmploymentHistory</h3>
                <div class="table-responsive">
                    <table class="table table-bordered" style="margin-bottom: 5px;">
                        <thead>
                            <tr>
                                <th style="width: 150px;">
                                    @Resources.ResourceEmploymentHistory.LblDepartment
                                </th>

                                <th style="width: 150px;">
                                    @Resources.ResourceEmploymentHistory.LblDesignation
                                </th>

                                <th style="width: 150px;">
                                    @Resources.ResourceDivision.LblDivision
                                </th>

                                <th style="width: 150px;">
                                    @Resources.ResourceDistrict.LblDistrict
                                </th>

                                <th style="width: 150px;">
                                    @Resources.ResourceUpazila.LblUpazila
                                </th>

                                <th>
                                    @Resources.ResourceEmploymentHistory.LblDateFrom
                                </th>
                                <th>
                                    @Resources.ResourceEmploymentHistory.LblDateTo
                                </th>
                                <th>
                                    @Resources.ResourceEmployee.Remove
                                </th>

                                <th>
                                    @Resources.ResourceEmployee.LblAdd
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="adEmployee in AdminEmploymentHistories" ng-init="outerIndex=$index">

                                <td>
                                    <select data-ng-model="adEmployee.DepartmentId" class="form-control"
                                            data-ng-options="c.Id as c.Name for c in 
                                            allDepartmentFromDb | orderBy: 'Name'" 
                                            ng-change="getAdminDesignation(adEmployee.DepartmentId,$index)"                      name="adEmployee.DepartmentId">
                                        <option value="">@Resources.ResourceEmploymentHistory.LblSelDep</option>
                                    </select>
                                </td>

                                <td>
                                    <select data-ng-model="adEmployee.DesignationId" class="form-control"
                                            ng-disable="!adEmployee.DepartmentId"
                                            data-ng-options="c.Id as c.Name for c 
                                            in adEmployee.adminDesignationList | orderBy: 'Name'"                               name="adEmployee.DesignationId">
                                        <option value="">@Resources.ResourceEmploymentHistory.LblSelDesg</option>
                                    </select>

                                </td>

                                <td>
                                    <select data-ng-model="adEmployee.DivisionId" class="form-control"
                                            data-ng-options="c.Id as c.Name for c in allDivisionFromDb 
                                            | orderBy: 'Name'" name="adEmployee.DivisionId" 
                                            ng-change="GetAllDistrict(adEmployee.DivisionId,$index)">
                                        <option value="">@Resources.ResourceUpazila.LblSelectDivision</option>
                                    </select>
                                </td>
                                <td>
                                    <select data-ng-model="adEmployee.DistrictId" class="form-control"
                                            data-ng-options="c.Id as c.Name for c 
                                            in adEmployee.adminDistrictList | orderBy: 'Name'" 
                                            name="adEmployee.DistrictId"
                                            ng-change="GetAllUpazila(adEmployee.DistrictId,$index)">
                                        <option value="">@Resources.ResourceUpazila.LblSelectDistrict</option>
                                    </select>
                                </td>
                                <td>
                                    <select data-ng-model="adEmployee.UpazillaId" class="form-control"
                                            data-ng-options="c.Id as c.Name for c in 
                                            adEmployee.adminUpazilaList | orderBy: 'Name'"                                       name="adEmployee.UpazillaId">
                                        <option value="">@Resources.ResourceCommon.LblSelectUpazila</option>
                                    </select>
                                </td>

                                <td>
                                    <input type="text" class="form-control" ng-model="adEmployee.DateFrom" name="DateFrom" data-date-format="dd-MMM-yyyy" bs-datepicker @*data-placement='auto'*@ data-container='body'
                                           data-min-view="0" data-autoclose="true">
                                </td>
                                <td>
                                    <input type="text" class="form-control" ng-model="adEmployee.DateTo" name="DateTo" data-date-format="dd-MMM-yyyy" bs-datepicker @*data-placement='auto'*@ data-container='body'
                                           data-min-view="0" data-autoclose="true">
                                </td>
                                <td>
                                    <button class="btn  btn-default btn-block gridButton" ng-bootbox-confirm="@Resources.ResourceCommon.MsgConfirmRemoveFromTheDetails " ng-bootbox-confirm-action="AdminEmploymentHistories.splice($index, 1)" ng-bootbox-confirm-action-cancel="confirmCallbackCancel(attr1, attr2)" title="@Resources.ResourceCommon.MsgConfirmRemoveFromTheDetails">
                                        <i class="text-danger glyphicon glyphicon-remove"></i>
                                    </button>
                                </td>
                                <td>
                                    <button class="btn btn-block btn-sm btn-info" ng-click="addNewDetailAdmin($event)">@Resources.ResourceCommon.LblAddDetailItem</button>
                                </td>

                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            @* ************ Employee Admin Finish *************** *@

            @* ************ Employee Education Start *************** *@
            <div class="row">
                <h3 class="heading">@Resources.ResourceEmployeeEducation.LblEmployeeEducation</h3>
                <div class="table-responsive">
                    <table class="table table-bordered" style="margin-bottom: 5px;">
                        <thead>
                            <tr>
                                <th style="width: 150px;">
                                    @Resources.ResourceEducationLevel.LblEducationLevel
                                </th>
                                <th>
                                    @Resources.ResourceBoardorUniversity.LblDegreeTitle
                                </th>
                                <th>
                                    @Resources.ResourceBoardorUniversity.LblDegreeMajor
                                </th>

                                <th style="width: 150px;">
                                    @Resources.ResourceBoardorUniversity.LblBoardorUniversity
                                </th>
                                <th style="width: 150px;">
                                    @Resources.ResourceInstitute.LblInstitute
                                </th>
                                <th>
                                    @Resources.ResourceBoardorUniversity.LblResult
                                </th>
                                <th>
                                    @Resources.ResourceBoardorUniversity.LblScale
                                </th>
                                <th>
                                    @Resources.ResourceEmployee.Remove
                                </th>
                                <th>
                                    @Resources.ResourceEmployee.LblAdd
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="edEmployee in EmployeeEducations" ng-init="outerIndex=$index">

                                <td>
                                    <select data-ng-model="edEmployee.LevelId" class="form-control"
                                            required data-ng-options="c.Id as c.Name for c in EducationLevelList                     |orderBy: 'Name'" name="LevelId">
                                        <option value=""> @Resources.ResourceCommon.LblSelect</option>
                                    </select>

                                </td>

                                <td>
                                    <input type="text" class="form-control" ng-model="edEmployee.DegreeTitle" name="DegreeTitle">
                                </td>
                                <td>
                                    <input type="text" class="form-control" ng-model="edEmployee.DegreeMajor" name="DegreeMajor">
                                </td>


                                <td>
                                    <select data-ng-model="edEmployee.BoardOrUniversityId" class="form-control"
                                            data-ng-options=" c.Id as c.Name for c in BoardorUniversityList                     |orderBy: 'Name'" name="BoardOrUniversityId"
                                            ng-change="getInstitute(edEmployee.BoardOrUniversityId,$index);">
                                        <option value=""> @Resources.ResourceCommon.LblSelect</option>
                                    </select>
                                </td>

                                <td>
                                    <select data-ng-model="edEmployee.InstituteId" class="form-control"
                                            data-ng-options="c.Id as c.Name for c in InstituteList
                                |orderBy: 'Name'" name="InstituteId">
                                        <option value="">@Resources.ResourceCommon.LblSelect</option>
                                    </select>
                                </td>
                                <td>
                                    <input type="text" class="form-control" ng-model="edEmployee.Result" name="Result">
                                </td>
                                <td>
                                    <input type="text" class="form-control" ng-model="edEmployee.Scale" name="Result">
                                </td>
                                <td>
                                    <button class="btn  btn-default btn-block gridButton" ng-bootbox-confirm="@Resources.ResourceCommon.MsgConfirmRemoveFromTheDetails " ng-bootbox-confirm-action="EmployeeEducations.splice($index, 1)" ng-bootbox-confirm-action-cancel="confirmCallbackCancel(attr1, attr2)" title="@Resources.ResourceCommon.MsgConfirmRemoveFromTheDetails">
                                        <i class="text-danger glyphicon glyphicon-remove"></i>
                                    </button>
                                </td>
                                <td>
                                    <button class="btn btn-block btn-sm btn-info" ng-click="addNewDetailEdu($event)">@Resources.ResourceCommon.LblAddDetailItem</button>
                                </td>

                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            @* ************ Employee Education Finish *************** *@
        </div>

        <div class="form-group">    
            <div class="col-md-offset-3 col-sm-offset-3 col-xs-12 col-sm-8 col-md-8  padding-right-zero">
                <input type="button" ng-click="addEmployee()" class="btn btn-primary" value="@Resources.ResourceCommon.LblSave"/>
                <input type="button" ng-click="reset()" class="btn btn-default" value="@Resources.ResourceCommon.LblReset"/>
                <input type="button" ng-show="editmode" class="btn btn-danger" value=@Resources.ResourceCommon.LblDelete
                             ng-bootbox-confirm='@Resources.ResourceCommon.MsgConfirm_Delete'
                        ng-bootbox-confirm-action="deleteEmployee()" ng-bootbox-confirm-action-cancel="confirmCallbackCancel(attr1, attr2)" />
            </div>
        </div>
    </div>
</div>
@* ************ FORM - SECTION (End)*************** *@

@* ************ POP-UP MODEL (Start)*************** *@
<div class="row">
    <div class="col-xs-12 col-sm-3 col-md-3">
        <modal title='@Resources.ResourceCommon.MsgHeaderSuccess' visible="showModalforSearch">
            <alert ng-repeat="alert in alerts" type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>
            <form name="form.update" role="form">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12">
                        <span>{{messageModalObj.message}}</span>
                    </div>
                </div>
            </form>
        </modal>
    </div>
</div>
@* ************ POP-UP MODEL (End)*************** *@
</div>

@section scripts{
    <script type="text/javascript">
        app.filter('startFrom',
            function() {
                return function(input, start) {
                    if (input) {
                        start = +start; //parse to int
                        return input.slice(start);
                    }
                    return [];
                }
            });
        app.factory('focus',
            function($rootScope, $timeout) {
                return function(name) {
                    $timeout(function() {
                        $rootScope.$broadcast('focusOn', name);
                    });
                };
            });
        app.factory('employeeService',
            [
                '$http', function($http) {
                    return {
                        saveEmployee: function(employee, fileName) {
                            var param = { employee: employee, fileName: fileName };
                            return $http({
                                url: '/Employee/CreateEmployee',
                                method: 'POST',
                                datatype: JSON,
                                data: JSON.stringify(param)
                            })
                        },
                        /*getAllEmployeeFromDb: function() {
                            return $http.get('/Employee/GetEmployeeList');
                        },*/
                        getAllEmployeeFromDb: function (pagingInfo) {
                            return $http.get('/Employee/GetEmployeeList2/', { params: pagingInfo });
                        },
                        getOperationEmployeeFromDb: function() {
                            return $http.get('/Employee/GetEmployeeListOperation');
                        },
                        getAllDepartment: function() {
                            return $http.get('/Department/GetDepartmentList');
                        },
                        getOperationDepartment: function() {
                            return $http.get('/Department/GetDepartmentListOperation');
                        },
                        getAllDesignationByDept: function(id) { // But Here All Designation are geted
                            return $http.get('/Designation/GetDesignationListByDepartmentId/' + id);
                        },
                        getAllDutyShiftListbySchoolId: function(id) { // But Here All shift are geted
                            return $http.get('/DutyShiftMaster/GetDutyShiftListbySchoolId/' + id);
                        },
                        getAllSchool: function() {
                            return $http.get('/Institute/GetSchoolList');
                        },
                        getAllEducationLevel: function() {
                            return $http.get('/EducationLevel/GetEducationLevelList');
                        },
                        getAllBoardorUniversity: function() {
                            return $http.get('/BoardorUniversity/GetBoardorUniversityList');
                        },
                        getAllInstitute: function() {
                            return $http.get('/Institute/GetInstituteList');
                        },
                        getAllDivision: function () {
                            return $http.get('/Division/GetActiveDivisionList');
                        },
                        getAllDistrictByDivision: function (id) {
                            return $http.get('/District/GetDistrictListByDivisionWithoutAll/' + id);
                        },
                        getAllUpazilaListByDistrict: function (id) {
                            return $http.get('/Upazila/GetAllUpazilaListByDistrictWithoutAll/' + id);
                        },
                        getAllDivisionFilter: function () {
                            return $http.get('/UserPermission/GetAllDivisionByUserPermission');
                        },
                        getAllDistrictListByDivisionFilter: function (id) {
                            return $http.get('/UserPermission/GetAllDistrictByUserPermission/' + id);
                        },
                        getAllUpazilaListByDistrictFilter: function (id) {
                            return $http.get('/UserPermission/GetAllUpazilaByUserPermission/' + id);
                        },
                        deleteEmployee: function(employee) {
                            return $http({
                                url: '/Employee/DeleteEmployee',
                                method: 'POST',
                                data: employee
                            });
                        },
                        uploadFile: function(name, code, file) {
                            var fdata = new FormData();
                            var url = '/Employee/UpoladFile';
                            fdata.append('name', name);
                            fdata.append('code', code);
                            fdata.append('file', file);

                            return $http.post(url,
                                fdata,
                                {
                                    transformRequest: angular.identity,
                                    headers: { 'Content-Type': undefined }
                                });

                        },
                        getAllLeaveType: function() {
	                        return $http.get('/LeaveType/GetLeaveTypeList');
                        }
                    };
                }
            ]);

        app.controller('employeeCtrl',
            function($scope, $timeout, $http, focus, $location, $anchorScroll, employeeService, $log, $ngBootbox) {
                $scope.pagingInfo = {
                    page: 1,
                    itemsPerPage: 10,
                    searchText:"",
                    totalItems: 0
                };

                $scope.selectPage = function (page) {
                    $scope.pagingInfo.page = page;
                    $scope.loadAllEmployee($scope.DivisionId, $scope.DistrictId, $scope.UpazilaId);
                };

                $scope.role = "Admin"
                $scope.bloodGroups = [
                    { name: "A+" }, { name: "A-" }, { name: "B+" }, { name: "B-" }, { name: "O+" },
                    { name: "O-" }, { name: "AB+" }, { name: "AB-" }
                ];

                $scope.Genders = [
                    { name: "Male" }, { name: "Female" }
                ];
                $scope.aMaritalStatus = [
                    { name: "Married" }, { name: "Unmarried" }, { name: "Divorced " }
                ];

                $scope.editmode = false;
                $scope.JoinDate = new Date();
                $scope.DOB = new Date();
                $scope.RoleId = @UserSession.GetUserFromSession().RoleId;
                $scope.myFile = null;
                $scope.EmploymentHistories = [];
                $scope.EmploymentHistories.push({
                    Id: '',
                    EmployeeId: '',
                    DepartmentId: '',
                    DesignationId: '',
                    DesignationList: [],
                    DateFrom: '',
                    DateTo: '',
                    DutyShiftList: [],
                    SchoolList: ''
                });

                $scope.addNewDetail = function($event) {
                    $scope.EmploymentHistories.push({
                        Id: '',
                        EmployeeId: '',
                        DepartmentId: '',
                        DesignationId: '',
                        DesignationList: [],
                        DateFrom: '',
                        DateTo: '',
                        DutyShiftList: [],
                        SchoolList: ''
                    });
                }
                $scope.AdminEmploymentHistories = [];
                $scope.AdminEmploymentHistories.push({
                    Id: '',
                    EmployeeId: '',
                    DepartmentId: '',
                    DesignationId: '',
                    DesignationList: [],
                    DivisionId: '',
                    DistrictlId: '',
                    UpazillalId: '',
                    DateFrom: '',
                    DateTo: '',
                    DutyShiftList: [],
                    SchoolList: ''
                });

                $scope.addNewDetailAdmin = function($event) {
                    $scope.AdminEmploymentHistories.push({
                        Id: '',
                        EmployeeId: '',
                        DepartmentId: '',
                        DesignationId: '',
                        DesignationList: [],
                        DivisionId: '',
                        DistrictlId: '',
                        UpazillalId: '',
                        DateFrom: '',
                        DateTo: ''
                    });
                }

                $scope.EmployeeEducations = [];
                $scope.EmployeeEducations.push({
                    Id: '',
                    EmployeeId: '',
                    LevelId: '',
                    DegreeTitle: '',
                    DegreeMajor: '',
                    Result: '',
                    BoardOrUniversityId: [],
                    InstituteList: [],
                    Scale: ''
                });

                $scope.addNewDetailEdu = function($event) {
                    $scope.EmployeeEducations.push({
                        Id: '',
                        EmployeeId: '',
                        LevelId: '',
                        DegreeTitle: '',
                        DegreeMajor: '',
                        Result: '',
                        BoardOrUniversityId: [],
                        InstituteList: [],
                        Scale: ''
                    });
                }


                loadAllLeaveType();
                function loadAllLeaveType() {
	                $scope.LeaveTypeList = [];
	                $scope.EmployeeLeaveBalanceList = [];
	                employeeService.getAllLeaveType()
		                .then(function onSuccess(response) {
			                $scope.LeaveTypeList = response.data;
			                if ($scope.LeaveTypeList.length > 0) {
				                angular.forEach($scope.LeaveTypeList, function (value, key) {
					                $scope.EmployeeLeaveBalanceList.push({
						                Id: null,
						                LeaveTypeId: value.Id,
						                LeaveTypeName: value.Name,
						                DafaultAllocatedDays: value.PayDays,
						                Achieved: 0,
						                Balance: 0,
						                CarryForward : value.CarryForward
					                });
				                });
			                }
			                $scope.calculateLeaveBalance();
		                })
		                .catch(function onError(response) {
			                $ngBootbox.alert('Leave Type Loading Failed');
		                });
				}

                $scope.calculateLeaveBalance = function() {
	                angular.forEach($scope.EmployeeLeaveBalanceList, function(value, key) {
		                value.Balance = value.DafaultAllocatedDays + value.Achieved;
	                });
                }

                $scope.messageModalObj = {};
                $scope.messageModalObj.message = '';

                $scope.operationdept = false;

                if ('@ViewBag.Operation' == 1) {
                    $scope.operationdept = true;
                }

                $scope.showModalforSearch = false;

                // Add a new employee
                $scope.addEmployee = function() {
                    $scope.$broadcast('show-errors-check-validity');
                    if ($scope.form.$valid) {
                        var employee = {};
                        employee["Id"] = $scope.Id;
                        employee["Code"] = $scope.Code;
                        employee["FullName"] = $scope.FullName;
                        employee["PresentAddress"] = $scope.PresentAddress;
                        employee["PermanentAddress"] = $scope.PermanentAddress;

                        employee["FatherName"] = $scope.FatherName;
                        employee["MotherName"] = $scope.MotherName;
                        employee["NationalId"] = $scope.NationalId;
                        employee["PassportNo"] = $scope.PassportNo;
                        employee["AuthenticationCode"] = $scope.AuthenticationCode;


                        employee["Gender"] = $scope.Gender;
                        employee["MaritalStatus"] = $scope.MaritalStatus;
                        employee["Relgion"] = $scope.Relgion;
                        employee["Nationality"] = $scope.Nationality;
                        employee["JoinDate"] = $scope.JoinDate;
                        employee["FullNameBangla"] = $scope.FullNameBangla;
                        employee["DOB"] = $scope.DOB;

                        employee["Email"] = $scope.Email;
                        employee["OfficeMobile"] = $scope.OfficeMobile;
                        employee["OfficePhone"] = $scope.OfficePhone;
                        employee["ResidentMobile"] = $scope.ResidentMobile;

                        employee["ResidentPhone"] = $scope.ResidentPhone;
                        employee["BloodGroup"] = $scope.BloodGroup;

                        if ($scope.AdminEmploymentHistories.length > 0)
                            for (var i = 0; i < $scope.AdminEmploymentHistories.length; i++) {
                                //alert($scope.EmploymentHistories[i].DepartmentId)
                                if ($scope.AdminEmploymentHistories[i].DepartmentId == null) {
                                    $scope.AdminEmploymentHistories[i].DesignationId = null;
                                }

                            }
                        //resolving dateTime issue of employee list
                        var adminEmploymentHistories = $scope.AdminEmploymentHistories;
                        angular.forEach(AdminEmploymentHistories,
                            function(item, key) {
                                item.DateFrom = new Date(item.DateFrom).toDateString();
                                item.DateTo = new Date(item.DateTo).toDateString();
                            });
                        employee["AdminEmploymentHistories"] = adminEmploymentHistories;


                        if ($scope.EmployeeEducations.length > 0)
                            for (var i = 0; i < $scope.EmployeeEducations.length; i++) {

                            }
                        var employmentEducation = $scope.EmployeeEducations;
                        employee["EmployeeEducations"] = employmentEducation;


                        var fileName = "";
                        if ($scope.myFile != null) {
                            fileName = $scope.myFile.name;
                        }

                        employeeService.saveEmployee(employee, fileName)
                            .then(function onSuccess(response) {
                                if ($scope.myFile != null) {
                                    $scope.UploadFile();
                                }
                                $scope.loadAllEmployee($scope.DivisionId, $scope.DistrictId, $scope.UpazilaId);
                                $scope.messageModalObj.message = response.data.message;
                                $scope.showModalforSearch = true;
                                $timeout(function() { $scope.showModalforSearch = false; }, 3000);
                                $scope.reset();

                            })
                            .catch(function onError(response) {
                                $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInSaving');
                            });
                    }
                };

                // Populate employee
                $scope.selectedRow = null;
                $scope.populateEmployee = function(employee) {
                    $scope.selectedRow = employee[0];
                    var aEmployee = employee[0];
                    $scope.Id = aEmployee.Id;
                    $scope.Code = aEmployee.Code;
                    $scope.FullName = aEmployee.FullName;
                    $scope.PresentAddress = aEmployee.PresentAddress;
                    $scope.PermanentAddress = aEmployee.PermanentAddress;
                    $scope.MotherName = aEmployee.MotherName;
                    $scope.NationalId = aEmployee.NationalId;
                    $scope.Nationality = aEmployee.Nationality;
                    $scope.FatherName = aEmployee.FatherName;
                    $scope.PassportNo = aEmployee.PassportNo;
                    $scope.PhotoPath = aEmployee.PhotoPath;
                    $scope.AuthenticationCode = aEmployee.AuthenticationCode;
                    $scope.JoinDate = aEmployee.JoinDate;
                    $scope.FullNameBangla = aEmployee.FullNameBangla;
                    $scope.DOB = aEmployee.DOB;

                    $scope.Email = aEmployee.Email;
                    $scope.OfficeMobile = aEmployee.OfficeMobile;
                    $scope.OfficePhone = aEmployee.OfficePhone;
                    $scope.ResidentMobile = aEmployee.ResidentMobile;
                    $scope.ResidentPhone = aEmployee.ResidentPhone;
                    $scope.BloodGroup = aEmployee.BloodGroup;
                    $scope.LatestDepartmentName = aEmployee.LatestDepartmentName;
                    $scope.LatestDesignationName = aEmployee.LatestDesignationName;
                
                    $scope.AdminEmploymentHistories = aEmployee.AdminEmploymentHistories;
                    if (aEmployee.AdminEmploymentHistories.length > 0)
                        for (var i = 0; i < $scope.AdminEmploymentHistories.length; i++) {
                            //alert($scope.EmploymentHistories[i].DepartmentId)
                            if ($scope.AdminEmploymentHistories[i].DepartmentId != null) {
                                $scope.getAdminDesignation($scope.AdminEmploymentHistories[i].DepartmentId, i);
                            }
                            if ($scope.AdminEmploymentHistories[i].DivisionId != null) {
                                $scope.GetAllDistrict($scope.AdminEmploymentHistories[i].DivisionId, i);
                            }
                            if ($scope.AdminEmploymentHistories[i].DistrictId != null) {
                                $scope.GetAllUpazila($scope.AdminEmploymentHistories[i].DistrictId, i);
                            }
                        }
                    $scope.EmployeeEducations = aEmployee.EmployeeEducations;
                    $scope.editmode = true;
                    $location.hash('searchDivId');
                    $anchorScroll();
                    focus('focusMe');
                }

				$scope.reset = function () {
					loadAllLeaveType();
                    $scope.selectedRow = null;
                    $scope.$broadcast('show-errors-reset');
                    $scope.myFile = null;
                    $scope.Id = '';
                    $scope.Code = '';
                    $scope.FullName = '';
                    $scope.PermanentAddress = '';
                    $scope.PresentAddress = '';
                    $scope.MotherName = '';
                    $scope.NationalId = '';
                    $scope.Nationality = '';
                    $scope.FatherName = '';
                    $scope.Email = '';
                    $scope.OfficeMobile = '';
                    $scope.OfficePhone = '';
                    $scope.ResidentMobile = '';
                    $scope.PassportNo = '';
                    $scope.PhotoPath = '';
                    $scope.ResidentPhone = '';
                    $scope.BloodGroup = '';
                    $scope.AuthenticationCode = '';
                    $scope.DOB = '';
                    $scope.FullNameBangla = '';
                    $scope.JoinDate = '';
                    $scope.disableProject = false;
                    $scope.IsHidden = true;
                    angular.element("input[type='file']").val(null);
                    $scope.AdminEmploymentHistories = [];
                    $scope.AdminEmploymentHistories.push({
                        Id: '',
                        EmployeeId: '',
                        DepartmentId: '',
                        DesignationId: '',
                        DesignationList: [],
                        DateFrom: '',
                        DateTo: '',
                        DutyShiftList: [],
                        SchoolList: ''
                    });
                    $scope.EmployeeEducations = [];
                    $scope.EmployeeEducations.push({
                        Id: '',
                        EmployeeId: '',
                        LevelId: '',
                        DegreeTitle: '',
                        DegreeMajor: '',
                        Result: '',
                        BoardOrUniversityId: [],
                        InstituteId: [],
                        Scale: ''

                    });
                    $scope.editmode = false;
                    angular.element("input[type='file']").val(null);
                    $('#imgshowField').attr('src', "");
                }

                $scope.deleteEmployee = function() {
                    var employee = $scope.selectedRow;

                    employeeService.deleteEmployee(employee)
                        .then(function onSuccess(response) {
                            $scope.messageModalObj.message = response.data.message;
                            $scope.showModalforSearch = true;
                            $timeout(function() { $scope.showModalforSearch = false; }, 3000);
                            $scope.loadAllEmployee($scope.DivisionId, $scope.DistrictId, $scope.UpazilaId);
                        })
                        .catch(function onError(response) {
                            $ngBootbox.alert('@Resources.ResourceCommon.MsgNot_deleted');
                        });
                }
                //file upload..................
                $scope.UploadFile = function() {
                    employeeService.uploadFile($scope.myFile.name, $scope.Code, $scope.myFile)
                        .then(function onSuccess(response) {
                            $scope.allEmployeeFileFromDb = response.data;
                        })
                        .catch(function onError(response) {
                            $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInLoading');
                        });
                }

                $scope.loadAllEmployee = function (divisionId, districtId, upazilaId) {
                    $scope.allEmployeeFromDb = [];
                    if (!divisionId)
                        divisionId = 0;
                    if (!districtId)
                        districtId = 0;
                    if (!upazilaId)
                        upazilaId = 0;

                    $scope.pagingInfo.divisionId = divisionId;
                    $scope.pagingInfo.districtId = districtId;
                    $scope.pagingInfo.upazilaId = upazilaId;
                    $scope.pagingInfo.searchText = $scope.SearchText;

                    employeeService.getAllEmployeeFromDb($scope.pagingInfo)
                        .then(function onSuccess(response) {
                            $scope.allEmployeeFromDb = response.data.EmployeeList;
                            $scope.pagingInfo.totalItems = response.data.RecordCount;
                        })
                        .catch(function onError(response) {
                            $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInLoading');
                        });
                }
                $scope.loadAllEmployee($scope.DivisionId, $scope.DistrictId, $scope.UpazilaId);

                loadAllDepartment();
                function loadAllDepartment() {
                    $scope.DesignationId = undefined;
                    $scope.allDesignationByDepartment = [];
                    if ($scope.operationdept) {
                        employeeService.getOperationDepartment()
                            .then(function onSuccess(response) {
                                $scope.allDepartmentFromDb = response.data;
                            })
                            .catch(function onError(response) {
                                $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInLoading');
                            });
                    } else {
                        employeeService.getAllDepartment()
                            .then(function onSuccess(response) {
                                $scope.allDepartmentFromDb = response.data;
                            })
                            .catch(function onError(response) {
                                $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInLoading');
                            });
                    }
                }

                loadAllSchoolList();

                function loadAllSchoolList() {
                    $scope.SchoolList = [];
                    employeeService.getAllSchool()
                        .then(function onSuccess(response) {
                            $scope.SchoolList = response.data;
                        })
                        .catch(function onError(response) {
                            $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInLoading');
                        });
                }

                loadAllEducationLevel();

                function loadAllEducationLevel() {
                    $scope.EducationLevelList = [];
                    employeeService.getAllEducationLevel()
                        .then(function onSuccess(response) {
                            $scope.EducationLevelList = response.data;
                        })
                        .catch(function onError(response) {
                            $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInLoading');
                        });
                }

                loadAllBoardorUniversity();

                function loadAllBoardorUniversity() {
                    $scope.EducatioBoardorUniversityListnLevelList = [];
                    employeeService.getAllBoardorUniversity()
                        .then(function onSuccess(response) {
                            $scope.BoardorUniversityList = response.data;
                        })
                        .catch(function onError(response) {
                            $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInLoading');
                        });
                }

                loadAllInstitute();

                function loadAllInstitute() {
                    $scope.EducatioBoardorUniversityListnLevelList = [];
                    employeeService.getAllInstitute()
                        .then(function onSuccess(response) {
                            $scope.InstituteList = response.data;
                        })
                        .catch(function onError(response) {
                            $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInLoading');
                        });
                }

                $scope.getAdminDesignation = function(departmentId, selectedAdminHistoryIndex) {
                    $scope.AdminEmploymentHistories[selectedAdminHistoryIndex].adminDesignationList = [];
                    $scope.allDesignationByDepartment = [];
                    if (departmentId != undefined && departmentId !== '' && departmentId !== null) {
                        employeeService.getAllDesignationByDept(departmentId)
                            .then(function onSuccess(response) {
                                $scope.AdminEmploymentHistories[selectedAdminHistoryIndex].adminDesignationList =
                                    response.data;
                                $scope.allDesignationByDepartment = response.data;
                            })
                            .catch(function onError(response) {
                                $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInLoading');
                            });
                    }
                }
        
                $scope.GetAllDistrict = function (divisionId, selectedAdminHistoryIndex) {
                    $scope.AdminEmploymentHistories[selectedAdminHistoryIndex].adminDistrictList = [];
                    $scope.allDistrictListByDivision = [];
                    if (divisionId != undefined && divisionId !== '' ) {
                        employeeService.getAllDistrictByDivision(divisionId)
                        .then(function onSuccess(response) {
                                $scope.AdminEmploymentHistories[selectedAdminHistoryIndex].adminDistrictList =
                                    response.data;
                                $scope.allDistrictListByDivision = response.data;
                            })
                            .catch(function onError(response) {
                                $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInLoading');
                            });
                    }
                        
                }
                   
                $scope.GetAllUpazila = function (districtId, selectedAdminHistoryIndex) {
                    $scope.AdminEmploymentHistories[selectedAdminHistoryIndex].adminUpazilaList = [];
                    employeeService.getAllUpazilaListByDistrict(districtId)
                        .then(function onSuccess(response) {
                            $scope.AdminEmploymentHistories[selectedAdminHistoryIndex].adminUpazilaList =
                                response.data;
                            $scope.UpazilaId = $scope.UpazilaId1;
                        })
                        .catch(function onError(response) {
                            $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInLoading');
                        });
                }

                $scope.getDutyShift = function(schoolId, selectedHistoryIndex) {
                    $scope.EmploymentHistories[selectedHistoryIndex].SchoolList = [];
                    $scope.allDutyShiftList = [];
                    if (schoolId != undefined && schoolId !== '' && schoolId !== null) {
                        employeeService.getAllDutyShiftListbySchoolId(schoolId)
                            .then(function onSuccess(response) {
                                $scope.EmploymentHistories[selectedHistoryIndex].SchoolList = response.data;
                                $scope.allDutyShiftList = response.data;
                            })
                            .catch(function onError(response) {
                                $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInLoading');
                            });
                    }
                }

                loadAllDivision();
                function loadAllDivision() {
                    $scope.allDivisionFromDb = [];
                    $scope.allDistrictListByDivision = [];
                    employeeService.getAllDivision()
                        .then(function onSuccess(response) {
                            $scope.allDivisionFromDb = response.data;
                        })
                        .catch(function onError(response) {
                            $ngBootbox.alert('@Resources.ResourceCommon.MsgErrorInLoading');
                        });
                }

                $scope.loadAllDivisionFilter = function () {
                    $scope.divisionList = [];
                    employeeService.getAllDivisionFilter()
                        .then(function onSuccess(response) {
                            $scope.divisionList = response.data;
                        });
                }
                $scope.loadAllDivisionFilter();

                $scope.GetAllDistrictFilter = function (divisionId) {
                    if (!divisionId)
                        divisionId = 0;
                    $scope.districtList = [];
                    employeeService.getAllDistrictListByDivisionFilter(divisionId)
                        .then(function onSuccess(response) {
                            $scope.districtList = response.data;
                        });
                }

                $scope.GetAllThanaFilter = function (districtId) {
                    if (!districtId)
                        districtId = 0;
                    $scope.thanaList = [];
                    employeeService.getAllUpazilaListByDistrictFilter(districtId)
                        .then(function onSuccess(response) {
                            $scope.thanaList = response.data;
                        });
                }

                $("#imgInp").change(function () {
                    files = this.files;
                    $scope.file = files[0];

                    if (files && files[0]) {
                        var reader = new FileReader();

                        reader.onload = function (e) {
                            $('#imgshowField').attr('src', e.target.result);
                        }
                        reader.readAsDataURL(files[0]);
                    }
                });

                $scope.IsHidden = true;
                $scope.ShowHide = function() {
                    //If DIV is hidden it will be visible
                    $scope.IsHidden = $scope.IsHidden ? false : true;
                }

                $scope.currentPage = 1; //current page
                $scope.entryLimit = 10; //max no of items to display in a page
                $scope.filteredItems = $scope.allEmployeeFromDb.length; //Initially for no filter
                $scope.totalItems = $scope.allEmployeeFromDb.length;
                //$scope.maxSize = 15;

                $scope.setPage = function(pageNo) {
                    $scope.currentPage = pageNo;
                };

                $scope.filter = function() {
                    $timeout(function() {
                            $scope.filteredItems = $scope.filtered.length;
                        },
                        9000);
                };

                $scope.sort_by = function (predicate) {
                    $scope.predicate = predicate;
                    $scope.reverse = !$scope.reverse;
                };
            });
    </script>
}